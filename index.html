<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIO 110, Exam 1 - Flashcards</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,-25" rel="stylesheet">
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Header / Top Navigation -->
    <header class="top-nav">
        <div class="nav-left">
            <button class="icon-btn menu-btn" aria-label="Menu">
                <span class="material-symbols-rounded">menu</span>
            </button>
            <div class="logo">
                <img src="images/Q.png" alt="Quizlet" width="32" height="32">
            </div>
        </div>
        
        <div class="search-bar">
            <span class="material-symbols-rounded search-icon">search</span>
            <span class="search-placeholder">Search for flashcards</span>
        </div>
        
        <div class="nav-right">
            <button class="create-btn" aria-label="Create">
                <span class="material-symbols-rounded">add</span>
            </button>
            <button class="upgrade-btn">Upgrade to Plus</button>
            <div class="avatar">
                <img src="images/Avatar.png" alt="Profile">
            </div>
        </div>
    </header>

    <!-- 3-Panel Layout (Variant B) -->
    <div class="three-panel-layout" id="three-panel-layout">
        <!-- Panel 1: Discovery -->
        <aside class="panel-discovery" id="panel-discovery">
            <div class="discovery-header">
                <h2 class="discovery-title">Discover</h2>
                <button class="discovery-refresh-btn" id="discovery-refresh-btn" title="Find related sets">
                    <span class="material-symbols-rounded">refresh</span>
                </button>
            </div>
            <h5 class="similar-title">Similar sets</h5>
            <div class="discovery-tabs" id="discovery-tabs">
                <button class="discovery-tab active" data-filter="all">All</button>
                <!-- Dynamic tabs will be added here -->
            </div>
            <div class="discovery-list" id="discovery-list">
                <!-- Discovery cards will be populated dynamically -->
                <div class="discovery-loading-skeleton">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
            </div>
        </aside>

        <!-- Resize Handle 1 -->
        <div class="panel-resize-handle" data-resize="left"></div>

        <!-- Panel 2: Main Content -->
        <main class="panel-main" id="panel-main">
            <div class="panel-main-header">
                <div class="panel-main-title-row">
                    <h1 class="panel-main-title" id="panel-set-title">BIO 110, Exam 1</h1>
                </div>
                <!-- Default meta (hidden in progress view) -->
                <div class="panel-main-meta hide-in-progress" id="panel-meta">
                    <span class="panel-meta-item">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M2.5 11.5L5.5 8.5L8.5 10.5L13.5 4.5" stroke="#D62381" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 4.5H13.5V8" stroke="#D62381" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span id="panel-studiers-count">32 studiers today</span>
                    </span>
                    <span class="panel-meta-item">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 1.5L9.79 5.13L13.81 5.72L10.9 8.53L11.58 12.51L8 10.63L4.42 12.51L5.1 8.53L2.19 5.72L6.21 5.13L8 1.5Z" fill="#FFCD1F"/>
                        </svg>
                        <span id="panel-rating">4.8 (32 reviews)</span>
                    </span>
                </div>
                <!-- Progress bar (shown in progress view) -->
                <div class="panel-progress-view show-in-progress" id="panel-progress-view">
                    <div class="panel-progress-bar">
                        <div class="panel-progress-fill" id="panel-progress-fill"></div>
                    </div>
                    <span class="panel-progress-text" id="panel-progress-text">0% complete</span>
                </div>
                <div class="panel-main-buttons hide-in-progress">
                    <button class="panel-study-btn" id="panel-study-btn">
                        <span class="material-symbols-rounded">play_arrow</span>
                        Study
                    </button>
                    <button class="panel-remix-btn" id="panel-remix-btn">
                        <span class="material-symbols-rounded">wand_stars</span>
                        Remix
                    </button>
                    <div class="panel-main-actions">
                        <button class="panel-action-btn">
                            <span class="material-symbols-rounded">bookmark</span>
                        </button>
                        <button class="panel-action-btn">
                            <span class="material-symbols-rounded">ios_share</span>
                        </button>
                        <div class="more-menu-wrapper">
                            <button class="panel-action-btn more-menu-trigger" aria-label="More options">
                                <span class="material-symbols-rounded">more_horiz</span>
                            </button>
                            <div class="more-menu-dropdown">
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">group_add</span>
                                    Add to class
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">wand_stars</span>
                                    Remix
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">print</span>
                                    Print
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">call_merge</span>
                                    Combine
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">code</span>
                                    Embed
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">warning</span>
                                    Report
                    </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-sort-filter">
                    <button class="panel-control-btn" id="panel-sort-btn">
                        <span>Sort</span>
                        <span class="material-symbols-rounded">unfold_more</span>
                    </button>
                    <button class="panel-control-btn hide-in-progress" id="panel-filter-btn">
                        <span>Filter</span>
                        <span class="material-symbols-rounded">filter_list</span>
                    </button>
                </div>
            </div>
            <div class="panel-terms-list" id="panel-terms-list">
                <!-- Terms will be populated dynamically -->
            </div>
            <button class="panel-add-term-btn hide-in-progress">
                <span class="material-symbols-rounded">add</span>
                <span>Add cards or upload notes</span>
            </button>
        </main>

        <!-- Resize Handle for Variant E (between terms and AI chat) -->
        <div class="panel-resize-handle" data-resize="center"></div>

        <!-- AI Chat Panel (Variant E only) -->
        <div class="ai-chat-panel" id="ai-chat-panel">
            <!-- Top action buttons -->
            <div class="ai-chat-top-bar">
                <div class="ai-chat-menu-wrapper">
                    <button class="ai-chat-menu-btn" id="ai-chat-menu-btn">
                        <span class="material-symbols-rounded">more_horiz</span>
                    </button>
                    <div class="ai-chat-menu-dropdown" id="ai-chat-menu-dropdown">
                        <button class="ai-chat-menu-item" id="ai-chat-clear-history">
                            <span class="material-symbols-rounded">delete_sweep</span>
                            <span>Clear chat history</span>
                        </button>
                        <button class="ai-chat-menu-item" id="ai-chat-new-conversation">
                            <span class="material-symbols-rounded">add_comment</span>
                            <span>Start new conversation</span>
                        </button>
                    </div>
                </div>
                <button class="ai-chat-collapse-btn">
                    <span class="material-symbols-rounded">expand_more</span>
                </button>
            </div>
            
            <!-- Messages area -->
            <div class="ai-chat-messages" id="ai-chat-messages">
                <!-- Welcome state -->
                <div class="ai-chat-welcome">
                    <!-- Gradient blur decoration -->
                    <div class="ai-chat-gradient-bg"></div>
                    
                    <div class="ai-chat-welcome-content">
                        <h2 class="ai-chat-welcome-title">Let's get ready for exam day</h2>
                        
                        <div class="ai-chat-action-pills">
                            <button class="ai-action-pill" data-prompt="Help me cram for my exam on these flashcards">
                                Help me cram
                            </button>
                            <button class="ai-action-pill" data-prompt="Quiz me on these flashcards">
                                Quiz me
                            </button>
                            <button class="ai-action-pill" data-prompt="Help me prep for an exam on this material">
                                Prep for an exam
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Input area -->
            <div class="ai-chat-input-area">
                <div class="ai-chat-input-wrapper">
                    <div class="ai-chat-input-row">
                        <button class="ai-chat-add-btn">
                            <span class="material-symbols-rounded">add</span>
                        </button>
                        <input 
                            type="text"
                            class="ai-chat-input" 
                            id="ai-chat-input" 
                            placeholder="Ask me anything"
                        />
                        <button class="ai-chat-send-btn" id="ai-chat-send-btn" disabled>
                            <span class="material-symbols-rounded">arrow_upward</span>
                        </button>
                    </div>
                    
                    <!-- LLM Model Selector -->
                    <div class="llm-selector-wrapper">
                        <button class="llm-selector-btn" id="llm-selector-btn">
                            <span class="llm-selected-name">claude-4.5-sonnet</span>
                            <span class="material-symbols-rounded">expand_more</span>
                        </button>
                        <div class="llm-dropdown" id="llm-dropdown">
                            <div class="llm-dropdown-header">
                                <span>Search models</span>
                            </div>
                            <div class="llm-dropdown-toggles">
                                <label class="llm-toggle-item">
                                    <span>Auto</span>
                                    <input type="checkbox" class="llm-toggle" id="llm-auto">
                                    <span class="llm-toggle-slider"></span>
                                </label>
                                <label class="llm-toggle-item">
                                    <span>MAX Mode</span>
                                    <input type="checkbox" class="llm-toggle" id="llm-max-mode" checked>
                                    <span class="llm-toggle-slider"></span>
                                </label>
                            </div>
                            <div class="llm-dropdown-list">
                                <button class="llm-option" data-model="composer-1">composer-1</button>
                                <button class="llm-option" data-model="claude-4.5-opus-high">claude-4.5-opus-high</button>
                                <button class="llm-option active" data-model="claude-4.5-sonnet">claude-4.5-sonnet</button>
                                <button class="llm-option" data-model="gpt-5.1-codex-max">gpt-5.1-codex-max</button>
                                <button class="llm-option" data-model="gpt-5.2">gpt-5.2</button>
                                <button class="llm-option" data-model="gemini-3-flash">gemini-3-flash</button>
                                <button class="llm-option" data-model="gpt-5.1-codex-mini">gpt-5.1-codex-mini</button>
                                <button class="llm-option" data-model="grok-code-fast-1">grok-code-fast-1</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resize Handle 2 -->
        <div class="panel-resize-handle" data-resize="right"></div>

        <!-- Panel 3: Study Plan (collapsible) -->
        <aside class="panel-study-plan" id="panel-study-plan">
            <!-- Default study plan view -->
            <div class="study-plan-default" id="study-plan-default">
                <div class="study-plan-header">
                    <h2 class="study-plan-title">Study plan</h2>
                    <button class="study-plan-settings" id="study-plan-settings-btn">
                        <span class="material-symbols-rounded settings-icon">tune</span>
                        <span class="material-symbols-rounded save-icon">check</span>
                    </button>
                </div>
                
                <div class="study-plan-timeline" id="study-plan-timeline">
                    <div class="study-plan-item recommended" data-mode="flashcards">
                        <div class="study-plan-dot"></div>
                        <button class="study-plan-drag-handle">
                            <span class="material-symbols-rounded">drag_indicator</span>
                        </button>
                        <div class="study-action-card study-action-flashcards expanded" data-mode="flashcards">
                            <div class="study-action-header">
                                <div class="study-action-icon edit-mode-icon">
                                    <div class="mode-icon-wrapper">
                                        <img src="images/flashcards.png" alt="Flashcards" class="mode-icon-img">
                                        <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                    </div>
                                </div>
                                <span class="study-action-label">Flashcards</span>
                                <div class="study-action-cta">
                                    <span class="study-action-cta-text">Quick practice</span>
                                    <span class="material-symbols-rounded">chevron_right</span>
                                </div>
                            </div>
                            <div class="study-action-illustration">
                                <img src="images/flashcards.png" alt="Flashcards" class="study-action-illustration-img">
                                <img src="images/shadow.png" alt="" class="study-action-illustration-shadow">
                            </div>
                            <div class="study-action-progress panel-flashcard-progress">
                                <div class="study-action-progress-bar">
                                    <div class="study-action-progress-fill" id="panel-flashcard-progress" style="width: 0%"></div>
                            </div>
                                <span class="study-action-progress-text" id="panel-flashcard-progress-text">0% complete</span>
                            </div>
                            <button class="study-action-delete">
                                <span class="material-symbols-rounded">delete</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="study-plan-item" data-mode="learn">
                        <div class="study-plan-dot"></div>
                        <button class="study-plan-drag-handle">
                            <span class="material-symbols-rounded">drag_indicator</span>
                        </button>
                        <div class="study-action-card study-action-learn" data-mode="learn">
                            <span class="study-action-label">Learn</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/learn.png" alt="Learn" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded chevron-icon">chevron_right</span>
                            </div>
                            <button class="study-action-delete">
                                <span class="material-symbols-rounded">delete</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="study-plan-item" data-mode="games">
                        <div class="study-plan-dot"></div>
                        <button class="study-plan-drag-handle">
                            <span class="material-symbols-rounded">drag_indicator</span>
                        </button>
                        <div class="study-action-card study-action-games" data-mode="games">
                            <span class="study-action-label">Games</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/games.png" alt="Games" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded chevron-icon">chevron_right</span>
                            </div>
                            <button class="study-action-delete">
                                <span class="material-symbols-rounded">delete</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="study-plan-item" data-mode="test">
                        <div class="study-plan-dot"></div>
                        <button class="study-plan-drag-handle">
                            <span class="material-symbols-rounded">drag_indicator</span>
                        </button>
                        <div class="study-action-card study-action-test" data-mode="test">
                            <span class="study-action-label">Test</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/test.png" alt="Test" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded chevron-icon">chevron_right</span>
                            </div>
                            <button class="study-action-delete">
                                <span class="material-symbols-rounded">delete</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="study-plan-item study-plan-add-new" id="study-plan-add-new">
                        <div class="study-plan-dot add-dot"></div>
                        <button class="study-action-card study-action-add" id="study-plan-add-btn">
                            <span class="study-action-label">Add activity</span>
                            <span class="material-symbols-rounded">add</span>
                        </button>
                    </div>
                </div>
                
                <div class="study-plan-header exam-day-header">
                    <h2 class="study-plan-title">Exam day</h2>
                </div>
                
                <div class="exam-day-timeline">
                    <div class="exam-day-item">
                        <div class="exam-day-dot"></div>
                        <div class="study-action-card study-action-cheatsheet" data-mode="cheatsheet">
                            <span class="study-action-label">Cheat sheet</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/cheatsheet.png" alt="Cheat sheet" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-day-item">
                        <div class="exam-day-dot"></div>
                        <div class="study-action-card study-action-podcast" data-mode="podcast">
                            <span class="study-action-label">Podcast</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/podcast.png" alt="Podcast" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-day-item">
                        <div class="exam-day-dot"></div>
                        <div class="study-action-card study-action-video" data-mode="video">
                            <span class="study-action-label">Video overview</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/video-overview.png" alt="Video overview" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-day-item">
                        <div class="exam-day-dot"></div>
                        <div class="study-action-card study-action-meditation" data-mode="meditation">
                            <span class="study-action-label">Pre-test meditation</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/meditation.png" alt="Meditation" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Expanded study experience view -->
            <div class="study-experience" id="study-experience">
                <div class="study-experience-header">
                    <nav class="experience-tabs" id="experience-tabs">
                        <button class="experience-tab-btn active" data-mode="flashcards">
                            <span class="material-symbols-rounded">style</span>
                            <span>Flashcards</span>
                        </button>
                        <button class="experience-tab-btn" data-mode="learn">
                            <span class="material-symbols-rounded">school</span>
                            <span>Learn</span>
                        </button>
                        <button class="experience-tab-btn" data-mode="games">
                            <span class="material-symbols-rounded">sports_esports</span>
                            <span>Games</span>
                        </button>
                        <button class="experience-tab-btn" data-mode="test">
                            <span class="material-symbols-rounded">quiz</span>
                            <span>Test</span>
                        </button>
                    </nav>
                    <div class="study-experience-progress">
                        <span id="study-progress-text">1 / 22</span>
                    </div>
                    <button class="study-close-btn" id="study-close-btn" title="Close">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                </div>
                
                <div class="study-experience-content" id="study-experience-content">
                    <!-- Flashcard experience -->
                    <div class="experience-flashcard-wrapper">
                        <div class="experience-flashcard-stack">
                            <div class="experience-flashcard-bg"></div>
                            <div class="experience-flashcard" id="experience-flashcard">
                                <div class="experience-flashcard-inner">
                                    <div class="experience-flashcard-front">
                                        <p class="experience-flashcard-text" id="experience-card-front">Term</p>
                                    </div>
                                    <div class="experience-flashcard-back">
                                        <p class="experience-flashcard-text" id="experience-card-back">Definition</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="experience-controls">
                            <div class="experience-controls-left">
                                <button class="experience-control-btn" id="experience-shuffle-btn" title="Shuffle">
                                    <span class="material-symbols-rounded">shuffle</span>
                                </button>
                            </div>
                            <div class="experience-controls-center">
                                <button class="experience-control-btn" id="experience-prev-btn">
                                    <span class="material-symbols-rounded">chevron_left</span>
                                </button>
                                <button class="experience-control-btn star" id="experience-star-btn">
                                    <span class="material-symbols-rounded">star</span>
                                </button>
                                <button class="experience-control-btn" id="experience-next-btn">
                                    <span class="material-symbols-rounded">chevron_right</span>
                                </button>
                            </div>
                            <div class="experience-controls-right">
                                <button class="experience-control-btn" id="experience-fullscreen-btn" title="Fullscreen">
                                    <span class="material-symbols-rounded">fullscreen</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Journey Layout (Variant C) -->
    <div class="journey-layout">
        <!-- Sidebar (exact mirror of Variant A sidebar) -->
        <aside class="journey-sidebar">
            <div class="set-info">
                <h1 class="set-title journey-set-title-sync">BIO 110, Exam 1</h1>
                
                <!-- Default metadata (shown before engagement) -->
                <div class="set-meta" id="journey-sidebar-set-meta">
                    <div class="stat-item">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M2.5 11.5L5.5 8.5L8.5 10.5L13.5 4.5" stroke="#D62381" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 4.5H13.5V8" stroke="#D62381" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>32 studiers today</span>
                    </div>
                    
                    <div class="stat-item">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 1.5L9.79 5.13L13.81 5.72L10.9 8.53L11.58 12.51L8 10.63L4.42 12.51L5.1 8.53L2.19 5.72L6.21 5.13L8 1.5Z" fill="#FFCD1F"/>
                        </svg>
                        <span>4.8 (32 reviews)</span>
                    </div>
                </div>
                
                <!-- Progress view (shown after engagement) -->
                <div class="sidebar-progress-view" id="journey-sidebar-progress-view">
                    <div class="sidebar-progress-bar">
                        <div class="sidebar-progress-fill" id="journey-sidebar-progress-fill"></div>
                    </div>
                    <span class="sidebar-progress-text" id="journey-sidebar-progress-text">0% complete</span>
                </div>
                
                <div class="action-buttons journey-action-buttons">
                    <div class="action-buttons-left">
                        <button class="sidebar-study-btn journey-sidebar-study-btn">
                            <span class="material-symbols-rounded">play_arrow</span>
                            Study
                        </button>
                        <button class="sidebar-remix-btn">
                            <span class="material-symbols-rounded">wand_stars</span>
                            Remix
                        </button>
                    </div>
                    <div class="action-buttons-right">
                        <button class="action-btn" aria-label="Bookmark">
                            <span class="material-symbols-rounded">bookmark</span>
                        </button>
                        <button class="action-btn" aria-label="Share">
                            <span class="material-symbols-rounded">ios_share</span>
                        </button>
                        <div class="more-menu-wrapper">
                            <button class="action-btn more-menu-trigger" aria-label="More options">
                                <span class="material-symbols-rounded">more_horiz</span>
                            </button>
                            <div class="more-menu-dropdown">
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">group_add</span>
                                    Add to class
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">wand_stars</span>
                                    Remix
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">print</span>
                                    Print
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">call_merge</span>
                                    Combine
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">code</span>
                                    Embed
                                </button>
                                <button class="more-menu-item">
                                    <span class="material-symbols-rounded">warning</span>
                                    Report
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sort & Filter Controls -->
            <div class="toc-controls">
                <button class="toc-control-btn" id="journey-sort-btn">
                    <span>Sort</span>
                    <span class="material-symbols-rounded">unfold_more</span>
                </button>
                <button class="toc-control-btn" id="journey-filter-btn">
                    <span>Filter</span>
                    <span class="material-symbols-rounded">filter_list</span>
                </button>
            </div>

            <div class="journey-topics-container" id="journey-topics-container">
                <!-- Dynamic content will be populated here -->
            </div>

            <!-- About Section -->
            <div class="about-section">
                <h3 class="about-title">About this set</h3>
                <p class="about-description" id="journey-about-description">
                    This part should be an AI generated description of this study set based on the set content (set title + terms and definitions)
                </p>

                <!-- Creator Info -->
                <div class="creator-info">
                    <div class="creator-avatar">
                        <img src="images/Avatar.png" alt="Creator">
                    </div>
                    <div class="creator-details">
                        <span class="creator-name">Created by <strong>AllStudyNoSleep</strong></span>
                        <span class="creator-badge">Power creator · 2 years creating</span>
                    </div>
                </div>

                <!-- Metadata Items (same as Variant A) -->
                <div class="metadata-list">
                    <div class="metadata-item">
                        <span class="material-symbols-rounded metadata-icon">school</span>
                        <div class="metadata-content">
                            <span class="metadata-label">Course member</span>
                            <span class="metadata-value">Enrolled in Biology 110, Chemistry 2200</span>
                        </div>
                    </div>
                    
                    <div class="metadata-item">
                        <span class="material-symbols-rounded metadata-icon">bolt</span>
                        <div class="metadata-content">
                            <span class="metadata-label">Power creator</span>
                            <span class="metadata-value">Has created 1000+ terms on Quizlet</span>
                        </div>
                    </div>
                    
                    <div class="metadata-item">
                        <span class="metadata-icon metadata-icon-text">Q+</span>
                        <div class="metadata-content">
                            <span class="metadata-label">Quizlet Plus subscriber</span>
                            <span class="metadata-value">Power creator · 2 years creating</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Old Left Panel: Set Info & Terms (hidden, kept for backwards compatibility) -->
        <div class="journey-terms-panel">
            <div class="journey-header">
                <h1 class="journey-title" id="journey-set-title">BIO 110, Exam 1</h1>
                <div class="journey-meta">
                    <span class="journey-meta-item trending">
                        <span class="material-symbols-rounded">trending_up</span>
                        32 studiers today
                    </span>
                    <span class="journey-meta-item rating">
                        <span class="material-symbols-rounded filled star-icon">star</span>
                        4.8 (32 reviews)
                    </span>
                </div>
            </div>
            
            <!-- Actions -->
            <div class="journey-secondary-actions">
                <button class="journey-study-btn">
                    <span class="material-symbols-rounded">play_arrow</span>
                    Study
                </button>
                <button class="journey-action-btn" title="Save">
                    <span class="material-symbols-rounded">bookmark</span>
                </button>
                <button class="journey-action-btn" title="Share">
                    <span class="material-symbols-rounded">ios_share</span>
                </button>
                <button class="journey-action-btn" title="More">
                    <span class="material-symbols-rounded">more_horiz</span>
                </button>
            </div>
            
            <!-- Sort/Filter -->
            <div class="journey-controls">
                <button class="journey-sort-btn" id="journey-sort-btn-old">
                    <span>Sort</span>
                    <span class="material-symbols-rounded">unfold_more</span>
                </button>
                <button class="journey-filter-btn" id="journey-filter-btn-old">
                    <span>Filter</span>
                    <span class="material-symbols-rounded">filter_list</span>
                </button>
            </div>
            
            <div class="journey-terms-list" id="journey-terms-list">
                <!-- Terms sections will be populated dynamically -->
            </div>
            
            <button class="journey-add-btn">
                <span class="material-symbols-rounded">add</span>
            </button>
        </div>
        
        <!-- Right Panel: Journey Map -->
        <div class="journey-map-panel">
            <div class="journey-map" id="journey-map">
                <!-- Journey nodes will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Table Layout (Variant D) -->
    <div class="table-layout">
        <!-- Left Rail - Set Info (matches study-mode-sidebar) -->
            <aside class="table-rail">
                <div class="rail-content">
                    <!-- Title & Meta -->
                    <div class="rail-header">
                        <h1 class="rail-title" id="table-set-title">BIO 110, Exam 1</h1>
                        <div class="rail-meta" id="rail-meta">
                            <span class="rail-meta-item">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M2.5 11.5L5.5 8.5L8.5 10.5L13.5 4.5" stroke="#D62381" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M10 4.5H13.5V8" stroke="#D62381" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                32 studiers today
                            </span>
                            <span class="rail-meta-item">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M8 1.5L9.79 5.13L13.81 5.72L10.9 8.53L11.58 12.51L8 10.63L4.42 12.51L5.1 8.53L2.19 5.72L6.21 5.13L8 1.5Z" fill="#FFCD1F"/>
                                </svg>
                                4.8 (32 reviews)
                            </span>
                        </div>
                        <!-- Progress bar (shown when user has study progress) -->
                        <div class="rail-progress-view" id="rail-progress-view">
                            <div class="rail-progress-bar">
                                <div class="rail-progress-fill" id="rail-progress-fill"></div>
                            </div>
                            <span class="rail-progress-text" id="rail-progress-text">0% complete</span>
                        </div>
                    </div>

                    <!-- Primary Actions with Secondary Actions inline -->
                    <div class="rail-primary-actions">
                        <button class="rail-study-btn" id="rail-study-btn">
                            <span class="material-symbols-rounded">play_arrow</span>
                            Study
                        </button>
                        <button class="rail-remix-btn" id="rail-remix-btn">
                            <span class="material-symbols-rounded">wand_stars</span>
                            Remix
                        </button>
                        <button class="rail-action-btn" title="Save">
                            <span class="material-symbols-rounded">bookmark</span>
                        </button>
                        <button class="rail-action-btn" title="Share">
                            <span class="material-symbols-rounded">ios_share</span>
                        </button>
                        <button class="rail-action-btn" title="More">
                            <span class="material-symbols-rounded">more_horiz</span>
                        </button>
                    </div>

                    <!-- About Section -->
                    <div class="rail-section">
                        <h3 class="rail-section-title">About this set</h3>
                        <p class="rail-about-text" id="table-about-text">
                            This part should be an AI generated description of this study set based on the set content (set title + terms and definitions)
                        </p>
                    </div>

                    <!-- Creator Section -->
                    <div class="rail-section rail-creator">
                        <div class="rail-creator-avatar">
                            <img src="images/Avatar-photo.png" alt="Creator">
                        </div>
                        <div class="rail-creator-info">
                            <span class="rail-creator-label">Created by</span>
                            <span class="rail-creator-name">AllStudyNoSleep</span>
                            <span class="rail-creator-badge">Power creator · 2 years creating</span>
                        </div>
                    </div>

                    <!-- Course Member Section -->
                    <div class="rail-section rail-course">
                        <div class="rail-course-icon">
                            <span class="material-symbols-rounded">assured_workload</span>
                        </div>
                        <div class="rail-course-info">
                            <span class="rail-course-title">Course member</span>
                            <span class="rail-course-desc">Enrolled in Biology 110, Chemistry 2200</span>
                        </div>
                    </div>

                    <!-- Similar Sets Section -->
                    <div class="rail-section rail-similar">
                        <h3 class="rail-section-title">Similar sets</h3>
                        
                        <!-- Filter Pills -->
                        <div class="rail-filter-pills" id="rail-filter-pills">
                            <button class="rail-pill active" data-filter="all">All</button>
                            <button class="rail-pill" data-filter="biology">Biology</button>
                            <button class="rail-pill" data-filter="chemistry">Chemistry</button>
                            <button class="rail-pill" data-filter="exam">Exam prep</button>
                        </div>
                        
                        <!-- Recommendations List -->
                        <div class="rail-recommendations" id="rail-recommendations">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </aside>

        <!-- Main Section (Right) - Study Area (matches study-mode-main) -->
            <main class="table-main">
            <!-- Mode Tabs & Actions Header (matches study-mode-header) -->
            <div class="table-header">
                <div class="table-mode-control" id="table-mode-control">
                    <button class="table-mode-btn active" data-mode="list">
                        <span class="material-symbols-rounded">list</span>
                        <span>List</span>
                    </button>
                    <button class="table-mode-btn" data-mode="flashcards">
                        <span class="material-symbols-rounded">style</span>
                        <span>Flashcards</span>
                    </button>
                    <button class="table-mode-btn" data-mode="learn">
                        <span class="material-symbols-rounded">sync</span>
                        <span>Learn</span>
                    </button>
                    <button class="table-mode-btn" data-mode="games">
                        <span class="material-symbols-rounded">grid_view</span>
                        <span>Games</span>
                    </button>
                    <button class="table-mode-btn" data-mode="test">
                        <span class="material-symbols-rounded">description</span>
                        <span>Test</span>
                    </button>
                </div>
                <div class="table-header-actions">
                    <button class="table-action-btn" id="table-header-search-btn" aria-label="Search">
                        <span class="material-symbols-rounded">search</span>
                    </button>
                    <button class="table-action-btn" aria-label="More options">
                        <span class="material-symbols-rounded">more_vert</span>
                    </button>
                </div>
            </div>
            
            <!-- Terms Content Area -->
            <div class="table-content-area">
                <!-- Unified Toolbar -->
                <div class="table-list-toolbar">
                    <div class="toolbar-left">
                        <label class="table-checkbox select-all">
                            <input type="checkbox" id="table-list-select-all">
                            <span class="custom-checkbox"></span>
                        </label>
                        <button class="table-sort-btn" id="table-sort-btn">
                            <span>Sort</span>
                            <span class="material-symbols-rounded">unfold_more</span>
                        </button>
                        <button class="table-filter-btn" id="table-filter-btn">
                            <span>Filter</span>
                            <span class="material-symbols-rounded">filter_list</span>
                        </button>
                    </div>
                </div>
                
                <!-- Terms List -->
                <div class="table-terms-container">
                    <div class="table-terms-list" id="table-terms-list">
                        <!-- Terms will be populated by JavaScript -->
                    </div>
                </div>
        </div>
        </main>

        <!-- Selection Action Bar (hidden by default) -->
        <div class="table-action-bar" id="table-action-bar">
            <div class="action-bar-left">
                <span class="selection-count" id="selection-count">0 selected</span>
                <button class="action-bar-clear" id="action-bar-clear">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
            <div class="action-bar-actions">
                <button class="action-bar-btn primary">
                    <span class="material-symbols-rounded">play_arrow</span>
                    <span>Study</span>
                </button>
                <button class="action-bar-btn">
                    <span class="material-symbols-rounded">star</span>
                    <span>Star</span>
                </button>
                <button class="action-bar-btn">
                    <span class="material-symbols-rounded">note_add</span>
                    <span>Add to draft</span>
                </button>
                <button class="action-bar-btn danger">
                    <span class="material-symbols-rounded">delete</span>
                    <span>Delete</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Main Content (Default Layout) -->
    <main class="main-content">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="set-info">
                <h1 class="set-title">BI0 110, Exam 1</h1>
                
                <!-- Default metadata (shown before engagement) -->
                <div class="set-meta" id="sidebar-set-meta">
                    <div class="stat-item">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M2.5 11.5L5.5 8.5L8.5 10.5L13.5 4.5" stroke="#D62381" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 4.5H13.5V8" stroke="#D62381" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>32 studiers today</span>
                    </div>
                    
                    <div class="stat-item">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 1.5L9.79 5.13L13.81 5.72L10.9 8.53L11.58 12.51L8 10.63L4.42 12.51L5.1 8.53L2.19 5.72L6.21 5.13L8 1.5Z" fill="#FFCD1F"/>
                        </svg>
                        <span>4.8 (32 reviews)</span>
                    </div>
                </div>
                
                <!-- Progress view (shown after engagement) -->
                <div class="sidebar-progress-view" id="sidebar-progress-view">
                    <div class="sidebar-progress-bar">
                        <div class="sidebar-progress-fill" id="sidebar-progress-fill"></div>
                    </div>
                    <span class="sidebar-progress-text" id="sidebar-progress-text">0% complete</span>
                </div>
                
                <div class="action-buttons">
                    <button class="sidebar-study-btn">
                        <span class="material-symbols-rounded">play_arrow</span>
                        Study
                    </button>
                    <button class="sidebar-remix-btn">
                        <span class="material-symbols-rounded">wand_stars</span>
                        Remix
                    </button>
                    <button class="action-btn" aria-label="Bookmark">
                        <span class="material-symbols-rounded">bookmark</span>
                    </button>
                    <button class="action-btn" aria-label="Share">
                        <span class="material-symbols-rounded">ios_share</span>
                    </button>
                    <div class="more-menu-wrapper">
                        <button class="action-btn more-menu-trigger" aria-label="More options">
                        <span class="material-symbols-rounded">more_horiz</span>
                        </button>
                        <div class="more-menu-dropdown">
                            <button class="more-menu-item">
                                <span class="material-symbols-rounded">group_add</span>
                                Add to class
                            </button>
                            <button class="more-menu-item">
                                <span class="material-symbols-rounded">wand_stars</span>
                                Remix
                            </button>
                            <button class="more-menu-item">
                                <span class="material-symbols-rounded">print</span>
                                Print
                            </button>
                            <button class="more-menu-item">
                                <span class="material-symbols-rounded">call_merge</span>
                                Combine
                            </button>
                            <button class="more-menu-item">
                                <span class="material-symbols-rounded">code</span>
                                Embed
                            </button>
                            <button class="more-menu-item">
                                <span class="material-symbols-rounded">warning</span>
                                Report
                    </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sort & Filter Controls -->
            <div class="toc-controls">
                <button class="toc-control-btn" id="sort-btn">
                    <span>Sort</span>
                    <span class="material-symbols-rounded">unfold_more</span>
                </button>
                <button class="toc-control-btn" id="filter-btn">
                    <span>All</span>
                    <span class="material-symbols-rounded">filter_list</span>
                </button>
            </div>

            <div class="topics-container">
                <!-- Dynamic content will be populated here -->
            </div>

            <!-- About Section -->
            <div class="about-section">
                <h3 class="about-title">About this set</h3>
                <p class="about-description" id="about-description">
                    This part should be an AI generated description of this study set based on the set content (set title + terms and definitions)
                </p>

                <!-- Creator Info -->
                <div class="creator-info">
                    <div class="creator-avatar">
                        <img src="images/Avatar.png" alt="Creator">
                    </div>
                    <div class="creator-details">
                        <span class="creator-name">Created by <strong>AllStudyNoSleep</strong></span>
                        <span class="creator-badge">Power creator · 2 years creating</span>
                    </div>
                </div>

                <!-- Metadata Items -->
                <div class="metadata-list">
                    <div class="metadata-item">
                        <span class="material-symbols-rounded metadata-icon">school</span>
                        <div class="metadata-content">
                            <span class="metadata-label">Course member</span>
                            <span class="metadata-value">Enrolled in Biology 110, Chemistry 2200</span>
                        </div>
                    </div>
                    
                    <div class="metadata-item">
                        <span class="material-symbols-rounded metadata-icon">bolt</span>
                        <div class="metadata-content">
                            <span class="metadata-label">Power creator</span>
                            <span class="metadata-value">Has created 1000+ terms on Quizlet</span>
                        </div>
                    </div>
                    
                    <div class="metadata-item">
                        <span class="metadata-icon metadata-icon-text">Q+</span>
                        <div class="metadata-content">
                            <span class="metadata-label">Quizlet Plus subscriber</span>
                            <span class="metadata-value">Power creator · 2 years creating</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Right Content Area -->
        <section class="study-area">
            <!-- Tab Navigation -->
            <nav class="study-tabs">
                <button class="tab-btn active" data-tab="flashcards">
                    <span class="material-symbols-rounded">style</span>
                    <span>Flashcards</span>
                </button>
                <button class="tab-btn" data-tab="learn">
                    <span class="material-symbols-rounded">school</span>
                    <span>Learn</span>
                </button>
                <button class="tab-btn" data-tab="games">
                    <span class="material-symbols-rounded">sports_esports</span>
                    <span>Games</span>
                </button>
                <button class="tab-btn" data-tab="test">
                    <span class="material-symbols-rounded">quiz</span>
                    <span>Test</span>
                </button>
            </nav>

            <!-- Flashcard -->
            <div class="flashcard-wrapper">
                <div class="flashcard-stack">
                    <div class="flashcard-bg"></div>
                    <div class="flashcard" id="flashcard">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">
                                <p class="flashcard-text" id="card-front">Isomers</p>
                            </div>
                            <div class="flashcard-back">
                                <p class="flashcard-text" id="card-back">Two compounds with the same chemical formula but different structures</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Flashcard Controls -->
            <div class="flashcard-controls">
                <button class="control-btn" id="settings-btn" aria-label="Settings">
                    <span class="material-symbols-rounded">settings</span>
                </button>
                
                <div class="nav-controls">
                    <button class="control-btn" id="prev-btn" aria-label="Previous card">
                        <span class="material-symbols-rounded">chevron_left</span>
                    </button>
                    <button class="control-btn" id="star-btn" aria-label="Star card">
                        <span class="material-symbols-rounded">star</span>
                    </button>
                    <button class="control-btn" id="next-btn" aria-label="Next card">
                        <span class="material-symbols-rounded">chevron_right</span>
                    </button>
                </div>
                
                <button class="control-btn" id="fullscreen-btn" aria-label="Study" title="Launch Study Mode">
                    <span class="material-symbols-rounded">fullscreen</span>
                </button>
            </div>

            <!-- Similar Study Sets -->
            <div class="similar-sets">
                <h3 class="similar-title">Similar sets</h3>
                <div class="sets-grid" id="similar-sets-grid">
                    <!-- Dynamically populated by AI -->
                </div>
            </div>
        </section>
    </main>

    <!-- Layout Selector Modal -->
    <div class="import-modal-overlay" id="import-modal-overlay">
        <div class="import-modal layout-modal">
            <div class="import-modal-header">
                <!-- Main step header -->
                <div class="import-title" id="header-main">
                    <span class="material-symbols-rounded">dashboard</span>
                    <span>Set page options</span>
                </div>
                <!-- Import step header -->
                <div class="import-title hidden" id="header-import">
                    <button class="import-back-btn" id="import-back-btn">
                        <span class="material-symbols-rounded">arrow_back</span>
                    </button>
                    <span id="import-header-text">Import new set</span>
                </div>
                <button class="import-close-btn" id="import-close-btn" aria-label="Close modal">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <path d="M5 5L15 15M15 5L5 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
            <div class="import-modal-content">
                <!-- Step 1: Main Menu -->
                <div class="modal-step" id="modal-step-main" data-step="main">
                <!-- Design Variant Selector -->
                    <div class="import-field variant-field">
                        <label class="import-label">Select prototype</label>
                    <div class="variant-selector" id="variant-selector">
                        <button class="variant-btn active" data-variant="option-a">
                                <span class="variant-icon">
                                    <span class="material-symbols-rounded">view_carousel</span>
                                </span>
                                <span class="variant-btn-text">
                            <span class="variant-name">Preview</span>
                                    <span class="variant-desc">Card carousel with preview</span>
                                </span>
                        </button>
                        <button class="variant-btn" data-variant="option-b">
                                <span class="variant-icon">
                                    <span class="material-symbols-rounded">view_column</span>
                                </span>
                                <span class="variant-btn-text">
                                    <span class="variant-name">Panels</span>
                                    <span class="variant-desc">Three-column layout</span>
                                </span>
                        </button>
                        <button class="variant-btn" data-variant="option-c">
                                <span class="variant-icon">
                                    <span class="material-symbols-rounded">route</span>
                                </span>
                                <span class="variant-btn-text">
                            <span class="variant-name">Journey</span>
                                    <span class="variant-desc">Visual learning path</span>
                                </span>
                        </button>
                    </div>
                </div>
                
                    <!-- Select Content Section -->
                    <div class="modal-section-divider"></div>
                    <div class="import-field content-field">
                        <div class="content-header-row">
                            <label class="import-label">Select tester</label>
                            <div class="content-search-wrapper">
                                <span class="material-symbols-rounded content-search-icon">search</span>
                                <input type="text" class="content-search-input" id="content-search-input" placeholder="Filter">
                            </div>
                        </div>
                        <div class="content-selector" id="content-selector">
                            <p class="content-empty-state">No saved content yet. Import a set to get started.</p>
                        </div>
                    </div>
                    
                    <div class="import-actions-group">
                        <button class="content-btn import-open-btn" id="import-open-btn">
                            <span class="content-icon">
                                <span class="material-symbols-rounded">upload</span>
                            </span>
                            <span class="content-btn-text">
                                <span class="content-name">Import a new set</span>
                            </span>
                        </button>
                    </div>
                    
                    <!-- Debug Options Section -->
                    <div class="modal-section-divider"></div>
                    <div class="import-field debug-field">
                        <label class="import-label">Debug options</label>
                        <button class="debug-reset-btn" id="debug-reset-progress-btn">
                            Reset study progress
                        </button>
                        <button class="debug-reset-btn" id="debug-reset-plan-btn">
                            Reset study plan
                        </button>
                    </div>
                </div>
                
                <!-- Step 2: Import Set -->
                <div class="modal-step hidden" id="modal-step-import" data-step="import">
                    <div class="import-field">
                        <label class="import-label" for="import-tester-name">Tester Name</label>
                        <input 
                            type="text" 
                            id="import-tester-name" 
                            class="import-title-input" 
                            placeholder="e.g., John Smith"
                        >
                    </div>
                <div class="import-field">
                    <label class="import-label" for="import-title">Set Title</label>
                    <input 
                        type="text" 
                        id="import-title" 
                        class="import-title-input" 
                        placeholder="e.g., PSY 101 - Chapter 1"
                    >
                </div>
                <div class="import-field">
                    <label class="import-label" for="import-textarea">Flashcard Content</label>
                    <p class="import-instructions">Paste flashcards below. Supports tab or comma between term/definition, and newlines or semicolons between cards.</p>
                    <textarea 
                        id="import-textarea" 
                        class="import-textarea" 
                        placeholder="Question or term&#x9;Answer or definition&#x0a;What is psychology?&#x9;The scientific study of mind and behavior"
                        spellcheck="false"
                    ></textarea>
                </div>
                    <div class="import-step-actions">
                <button class="import-submit-btn" id="import-submit-btn">
                            <span id="import-submit-text">Import Set</span>
                </button>
                        <button class="import-delete-btn hidden" id="import-delete-btn">
                            Delete set
                </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Study Mode Screen -->
    <div class="study-mode-screen" id="study-mode-screen">
        <!-- Left Panel - Progress View -->
        <aside class="study-mode-sidebar">
            <!-- Version 1: Progress View (default for most variants) -->
            <div class="study-mode-sidebar-content study-mode-progress-view" id="study-mode-progress-view">
            <div class="study-mode-sidebar-header">
                <div class="study-mode-title-row">
                    <h1 class="study-mode-title" id="study-mode-title">Cells & Tissues</h1>
                </div>
                <div class="study-mode-progress">
                    <div class="study-mode-progress-bar">
                        <div class="study-mode-progress-fill" id="study-mode-progress-fill" style="width: 12%"></div>
                    </div>
                </div>
                <span class="study-mode-progress-text" id="study-mode-progress-text">12% Complete</span>
            </div>
            
                <div class="study-mode-concepts-list" id="study-mode-concepts-list">
                    <!-- Concept progress items will be populated dynamically -->
                </div>
            </div>
            
            <!-- Version 2: Study Plan View (for 3-panel variant) -->
            <div class="study-mode-sidebar-content study-mode-plan-view" id="study-mode-plan-view" style="display: none;">
                <div class="study-mode-plan-title-row">
                    <h1 class="study-mode-title" id="study-mode-plan-title">Set Title</h1>
                </div>
                <div class="study-plan-header">
                    <h2 class="study-plan-title">Study plan</h2>
                    <button class="study-plan-settings" id="study-mode-plan-settings-btn">
                        <span class="material-symbols-rounded settings-icon">tune</span>
                        <span class="material-symbols-rounded save-icon">check</span>
                </button>
            </div>
            
                <div class="study-plan-timeline">
                    <div class="study-plan-item recommended" data-mode="flashcards">
                        <div class="study-plan-dot"></div>
                        <div class="study-action-card study-action-flashcards expanded" data-mode="flashcards">
                            <div class="study-action-header">
                                <div class="study-action-icon edit-mode-icon">
                                    <div class="mode-icon-wrapper">
                                        <img src="images/flashcards.png" alt="Flashcards" class="mode-icon-img">
                                        <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                    </div>
                                </div>
                                <span class="study-action-label">Flashcards</span>
                                <div class="study-action-cta">
                                    <span class="study-action-cta-text">Quick practice</span>
                                    <span class="material-symbols-rounded">chevron_right</span>
                                </div>
                            </div>
                            <div class="study-action-illustration">
                                <img src="images/flashcards.png" alt="Flashcards" class="study-action-illustration-img">
                                <img src="images/shadow.png" alt="" class="study-action-illustration-shadow">
                            </div>
                            <div class="study-action-progress">
                                <div class="study-action-progress-bar">
                                    <div class="study-action-progress-fill" id="study-mode-flashcard-progress" style="width: 0%"></div>
                                </div>
                                <span class="study-action-progress-text" id="study-mode-flashcard-progress-text">0% complete</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="study-plan-item">
                        <div class="study-plan-dot"></div>
                        <div class="study-action-card study-action-learn" data-mode="learn">
                            <span class="study-action-label">Learn</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/learn.png" alt="Learn" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="study-plan-item">
                        <div class="study-plan-dot"></div>
                        <div class="study-action-card study-action-games" data-mode="games">
                            <span class="study-action-label">Games</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/games.png" alt="Games" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="study-plan-item">
                        <div class="study-plan-dot"></div>
                        <div class="study-action-card study-action-test" data-mode="test">
                            <span class="study-action-label">Test</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/test.png" alt="Test" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="study-plan-header exam-day-header">
                    <h2 class="study-plan-title">Exam day</h2>
                </div>
                
                <div class="exam-day-timeline">
                    <div class="exam-day-item">
                        <div class="exam-day-dot"></div>
                        <div class="study-action-card study-action-cheatsheet" data-mode="cheatsheet">
                            <span class="study-action-label">Cheat sheet</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/cheatsheet.png" alt="Cheat sheet" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-day-item">
                        <div class="exam-day-dot"></div>
                        <div class="study-action-card study-action-podcast" data-mode="podcast">
                            <span class="study-action-label">Podcast</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/podcast.png" alt="Podcast" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-day-item">
                        <div class="exam-day-dot"></div>
                        <div class="study-action-card study-action-video" data-mode="video">
                            <span class="study-action-label">Video overview</span>
                            <div class="study-action-icon">
                                <div class="mode-icon-wrapper">
                                    <img src="images/video-overview.png" alt="Video overview" class="mode-icon-img">
                                    <img src="images/shadow.png" alt="" class="mode-icon-shadow">
                                </div>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                    <div class="exam-day-item">
                        <div class="exam-day-dot"></div>
                        <div class="study-action-card study-action-meditation" data-mode="meditation">
                            <span class="study-action-label">Pre-test meditation</span>
                            <div class="study-action-icon">
                                <span class="material-symbols-rounded">self_improvement</span>
                                <span class="material-symbols-rounded">chevron_right</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
        
        <!-- Right Panel - Study Area -->
        <main class="study-mode-main">
            <!-- Mode Tabs & Actions -->
            <div class="study-mode-header">
                <h1 class="study-mode-header-title" id="study-mode-header-title">Set Title</h1>
                <div class="study-mode-tabs-container">
                    <button class="study-mode-tab" data-mode="list">
                        <span class="material-symbols-rounded">format_list_bulleted</span>
                        List
                    </button>
                    <button class="study-mode-tab active" data-mode="flashcards">
                        <span class="material-symbols-rounded">style</span>
                        Flashcards
                    </button>
                    <button class="study-mode-tab" data-mode="learn">
                        <span class="material-symbols-rounded">sync</span>
                        Learn
                    </button>
                    <button class="study-mode-tab" data-mode="games">
                        <span class="material-symbols-rounded">grid_view</span>
                        Games
                    </button>
                    <button class="study-mode-tab" data-mode="test">
                        <span class="material-symbols-rounded">description</span>
                        Test
                    </button>
                </div>
                <div class="study-mode-header-actions">
                    <button class="study-mode-action-btn" aria-label="Settings">
                        <span class="material-symbols-rounded">settings</span>
                    </button>
                    <button class="study-mode-action-btn" id="study-mode-close-btn" aria-label="Close">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                </div>
            </div>
            
            <!-- Flashcard Area -->
            <div class="study-mode-card-container">
                <div class="study-mode-card-stack">
                    <div class="study-mode-card-bg"></div>
                    <div class="study-mode-card" id="study-mode-card">
                        <div class="study-mode-card-inner">
                            <div class="study-mode-card-front">
                                <button class="study-mode-card-audio" aria-label="Play audio">
                                    <span class="material-symbols-rounded">volume_up</span>
                                </button>
                                <div class="study-mode-card-content" id="study-mode-card-front">Isomers</div>
                                <button class="study-mode-card-star" id="study-mode-card-star" aria-label="Star">
                                    <span class="material-symbols-rounded">star</span>
                                </button>
                            </div>
                            <div class="study-mode-card-back">
                                <button class="study-mode-card-audio" aria-label="Play audio">
                                    <span class="material-symbols-rounded">volume_up</span>
                                </button>
                                <div class="study-mode-card-content" id="study-mode-card-back">Molecules with the same molecular formula but different structural arrangements</div>
                                <button class="study-mode-card-star" aria-label="Star">
                                    <span class="material-symbols-rounded">star</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Card Controls -->
                <div class="study-mode-card-controls">
                    <button class="study-mode-control-btn" id="study-mode-shuffle" aria-label="Shuffle">
                        <span class="material-symbols-rounded">shuffle</span>
                    </button>
                    <div class="study-mode-nav-controls">
                        <button class="study-mode-nav-btn" id="study-mode-prev" aria-label="Previous">
                            <span class="material-symbols-rounded">chevron_left</span>
                        </button>
                        <span class="study-mode-counter" id="study-mode-counter">1/35</span>
                        <button class="study-mode-nav-btn" id="study-mode-next" aria-label="Next">
                            <span class="material-symbols-rounded">chevron_right</span>
                        </button>
                    </div>
                    <button class="study-mode-control-btn" id="study-mode-fullscreen" aria-label="Fullscreen">
                        <span class="material-symbols-rounded">fullscreen</span>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Create Set Screen -->
    <div class="create-set-screen" id="create-set-screen">
        <!-- Create Set Header -->
        <header class="create-header">
            <div class="nav-left">
                <button class="icon-btn menu-btn" aria-label="Menu">
                    <span class="material-symbols-rounded">menu</span>
                </button>
                <div class="logo">
                    <img src="images/Q.png" alt="Quizlet" width="32" height="32">
                </div>
            </div>
            
            <div class="search-bar">
                <span class="material-symbols-rounded search-icon">search</span>
                <span class="search-placeholder">Search for practice tests</span>
            </div>
            
            <div class="nav-right">
                <button class="create-btn" aria-label="Create">
                    <span class="material-symbols-rounded">add</span>
                </button>
                <button class="upgrade-btn">Upgrade to Plus</button>
                <div class="avatar">
                    <img src="images/Avatar.png" alt="Profile">
                </div>
            </div>
        </header>

        <!-- Create Set Main Content -->
        <div class="create-set-layout">
            <!-- Main Content Area -->
            <div class="create-set-main">
                <!-- Title Row -->
                <div class="create-title-row">
                    <h1 class="create-page-title">Create a new flashcard set</h1>
                    <div class="create-title-actions">
                        <button class="create-action-btn-secondary" id="create-save-btn">Create</button>
                        <button class="create-action-btn-primary" id="create-practice-btn">Create and practice</button>
                    </div>
                </div>

                <!-- Visibility Badge -->
                <div class="create-visibility">
                    <span class="material-symbols-rounded">public</span>
                    <span>Public</span>
                </div>

                <!-- Set Info Card -->
                <div class="create-set-info">
                    <input type="text" class="create-set-title-input" id="create-set-title" placeholder="Title">
                    <textarea class="create-set-description" id="create-set-description" placeholder="Add a description..."></textarea>
                </div>

                <!-- Toolbar -->
                <div class="create-toolbar">
                    <div class="create-toolbar-left">
                        <button class="create-tool-btn">
                            <span class="material-symbols-rounded">add</span>
                            Import
                        </button>
                        <button class="create-tool-btn create-tool-btn-locked">
                            <span class="material-symbols-rounded">add</span>
                            Add diagram
                            <span class="create-lock-icon">
                                <span class="material-symbols-rounded">lock</span>
                            </span>
                        </button>
                    </div>
                    <div class="create-toolbar-right">
                        <label class="create-toggle-label">
                            Suggestions
                            <div class="create-toggle">
                                <input type="checkbox" id="suggestions-toggle" checked>
                                <span class="create-toggle-slider"></span>
                            </div>
                        </label>
                        <button class="create-icon-btn" aria-label="Shuffle">
                            <span class="material-symbols-rounded">shuffle</span>
                        </button>
                        <button class="create-icon-btn" aria-label="Keyboard shortcuts">
                            <span class="material-symbols-rounded">keyboard</span>
                        </button>
                        <button class="create-icon-btn" aria-label="Duplicate">
                            <span class="material-symbols-rounded">content_copy</span>
                        </button>
                    </div>
                </div>

                <!-- Cards List -->
                <div class="create-cards-list" id="create-cards-list">
                    <!-- Card 1 -->
                    <div class="create-card" data-card-index="0">
                        <div class="create-card-header">
                            <span class="create-card-number">1</span>
                            <div class="create-card-actions">
                                <button class="create-card-action-btn" aria-label="Reorder">
                                    <span class="material-symbols-rounded">drag_indicator</span>
                                </button>
                                <button class="create-card-action-btn" aria-label="Delete">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </div>
                        </div>
                        <div class="create-card-content">
                            <div class="create-card-field">
                                <input type="text" class="create-card-input" placeholder="Enter term">
                                <span class="create-card-label">TERM</span>
                            </div>
                            <div class="create-card-field">
                                <input type="text" class="create-card-input" placeholder="Enter definition">
                                <span class="create-card-label">DEFINITION</span>
                            </div>
                            <div class="create-card-image">
                                <span class="material-symbols-rounded">image</span>
                                <span>Image</span>
                            </div>
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div class="create-card" data-card-index="1">
                        <div class="create-card-header">
                            <span class="create-card-number">2</span>
                            <div class="create-card-actions">
                                <button class="create-card-action-btn" aria-label="Reorder">
                                    <span class="material-symbols-rounded">drag_indicator</span>
                                </button>
                                <button class="create-card-action-btn" aria-label="Delete">
                                    <span class="material-symbols-rounded">delete</span>
                                </button>
                            </div>
                        </div>
                        <div class="create-card-content">
                            <div class="create-card-field">
                                <input type="text" class="create-card-input" placeholder="Enter term">
                                <span class="create-card-label">TERM</span>
                            </div>
                            <div class="create-card-field">
                                <input type="text" class="create-card-input" placeholder="Enter definition">
                                <span class="create-card-label">DEFINITION</span>
                            </div>
                            <div class="create-card-image">
                                <span class="material-symbols-rounded">image</span>
                                <span>Image</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Card Button -->
                <button class="create-add-card-btn" id="create-add-card-btn">
                    Add a card
                </button>
            </div>

            <!-- Smart Assist Sidebar -->
            <aside class="create-smart-assist" id="create-smart-assist">
                <div class="smart-assist-header">
                    <div class="smart-assist-title">
                        <span class="material-symbols-rounded smart-assist-icon">auto_awesome</span>
                        <span>Smart Assist</span>
                        <span class="smart-assist-badge">Beta</span>
                    </div>
                    <button class="smart-assist-close" id="smart-assist-close" aria-label="Close Smart Assist">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                </div>
                <div class="smart-assist-body">
                    <p class="smart-assist-description">
                        Create flashcards by either uploading documents or pasting notes and typing a topic (e.g. photosynthesis).
                    </p>
                </div>
                <div class="smart-assist-footer">
                    <span class="smart-assist-count">0/100,000</span>
                    <div class="smart-assist-actions">
                        <button class="smart-assist-upload-btn">
                            <span class="material-symbols-rounded">add</span>
                            Upload
                        </button>
                        <button class="smart-assist-start-btn" disabled>Start</button>
                    </div>
                    <div class="smart-assist-powered">
                        <span>Enhanced by AI</span>
                        <span class="material-symbols-rounded">info</span>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Back Button (for returning to set view) -->
        <button class="create-back-btn" id="create-back-btn" aria-label="Back to set">
            <span class="material-symbols-rounded">arrow_back</span>
        </button>
    </div>

    <script src="script.js"></script>
</body>
</html>
